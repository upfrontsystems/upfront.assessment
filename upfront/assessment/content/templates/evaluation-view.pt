<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="upfront.assessment"
      lang="en">
<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="content-core">

       <h1 i18n:translate="heading_evaluation">Evaluation</h1>

       <p>XXX: Add name of learner once Relations are fixed</p>

        <tal:evaluations tal:condition="not:view/evaluation_table">
            <div i18n:translate="message_no_evaluation_data">Evaluation contains no data</div>
        </tal:evaluations>

        <form name="update-evaluation-form" tal:attributes="action view/evaluation_view_url" method="post">

            <div id="div-evaluation-table-listing">
                <tal:listing tal:condition="view/evaluation_table">
                    <table id="assessment-listing" class="rating">
                        <tr>
                            <th i18n:translate="heading_activity_uid">Activity</th>
                            <th i18n:translate="heading_rating">Rating</th>
                        </tr>
                        <tr tal:repeat="item view/evaluation_table">                            
                            <td class="answer_heading" tal:content="string:${repeat/item/number}."></td>                            
                            <td>
                                <table class="ratingsheet">      
                                    <tr>
                                       <input type="hidden" 
                                              tal:attributes="id string:activity_${item/uid};
                                                              name string:activity_${item/uid};
                                                              value item/rating">
                                        <td class="answer" value="1" tal:attributes="selected_answer python:item['rating'] == 1">
                                            <span>1</span>&nbsp;&nbsp;
                                        </td>
                                        <td class="answer" value="2" tal:attributes="selected_answer python:item['rating'] == 2">
                                            <span>2</span>&nbsp;&nbsp;
                                        </td>
                                        <td class="answer" value="3" tal:attributes="selected_answer python:item['rating'] == 3">
                                            <span>3</span>&nbsp;&nbsp;
                                        </td>
                                        <td class="answer" value="4" tal:attributes="selected_answer python:item['rating'] == 4">
                                            <span>4</span>&nbsp;
                                        </td>
                                        <td class="answer_red" value="-1" tal:attributes="selected_answer_red python:item['rating'] == -1">
                                            <span i18n:translate="message_not_rated">Not rated</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </tal:listing>
            </div>
            <input class="allowMultiSubmit" id="buttons-update-evaluation-submit" name="buttons.update.evaluation.submit"
                   value="Save" type="submit" i18n:attributes="value">

        </form>

    </tal:main-macro>
</metal:main>

</body>
</html>
